# 任务管理系统 需求设计文档

> 文档版本：v1.0  
> 创建日期：2026-02-12  
> 最后更新：2026-02-12  
> 负责人：张三

---

## 1. 项目概述

### 1.1 项目背景

当前团队使用邮件和即时通讯工具管理任务,导致任务信息分散、进度难以跟踪、协作效率低下。团队成员经常遗漏重要任务,项目延期情况频发。需要一个集中化的任务管理系统来解决这些问题。

### 1.2 项目目标

- 目标1：将任务管理效率提升50%,减少任务遗漏率至5%以下
- 目标2：实现任务进度实时可视化,项目经理可随时查看团队工作状态
- 目标3：支持100人以内的团队协作,系统响应时间< 2秒

### 1.3 目标用户

- **用户类型**：企业内部团队(产品、开发、设计、测试)
- **用户特征**：
  - 年龄：25-40岁
  - 技术熟练度：中等,熟悉基本的办公软件
  - 工作场景：办公室 + 远程办公
- **使用场景**：
  - 每日站会前查看今日任务
  - 项目启动时创建任务分配给团队成员
  - 完成任务后更新状态并通知相关人员

### 1.4 核心价值

- 为团队成员：清晰的任务列表,不再遗漏重要工作
- 为项目经理：实时掌握项目进度,及时发现风险
- 为企业：提升团队协作效率,缩短项目周期

---

## 2. 功能需求

### 2.1 功能列表

| 功能模块 | 功能描述                         | 优先级 | 备注     |
| -------- | -------------------------------- | ------ | -------- |
| 任务管理 | 创建、编辑、删除、查看任务       | P0     | 核心功能 |
| 任务分配 | 将任务分配给团队成员             | P0     | 核心功能 |
| 状态跟踪 | 任务状态流转(待办→进行中→已完成) | P0     | 核心功能 |
| 提醒通知 | 任务到期提醒、状态变更通知       | P1     | 重要功能 |
| 评论协作 | 任务下的讨论和文件附件           | P1     | 重要功能 |
| 数据统计 | 任务完成率、成员工作量统计       | P2     | 增强功能 |
| 权限管理 | 不同角色的权限控制               | P1     | 重要功能 |

### 2.2 用户故事

#### 故事1：创建任务

- **作为** 项目经理
- **我想要** 快速创建任务并分配给团队成员
- **以便** 明确工作内容和责任人
- **验收标准**：
  - [ ] 可以填写任务标题、描述、截止日期、优先级
  - [ ] 可以从团队成员列表中选择负责人
  - [ ] 创建成功后,负责人收到通知
  - [ ] 任务出现在负责人的任务列表中

#### 故事2：更新任务状态

- **作为** 开发人员
- **我想要** 将任务状态从"待办"更新为"进行中"或"已完成"
- **以便** 让团队知道我的工作进度
- **验收标准**：
  - [ ] 可以通过拖拽或点击按钮更新状态
  - [ ] 状态更新后,创建者收到通知
  - [ ] 任务卡片显示最新状态
  - [ ] 完成任务时可以添加完成说明

#### 故事3：查看任务列表

- **作为** 团队成员
- **我想要** 查看分配给我的所有任务
- **以便** 规划我的工作优先级
- **验收标准**：
  - [ ] 可以按状态筛选任务(全部/待办/进行中/已完成)
  - [ ] 可以按优先级排序
  - [ ] 可以按截止日期排序
  - [ ] 过期任务有明显的视觉提示

### 2.3 功能详细说明

#### 功能1：创建任务

**功能描述**：  
用户可以创建新任务,填写任务的基本信息,并分配给团队成员。

**输入**：

- 任务标题：必填,1-100字符
- 任务描述：可选,支持富文本,最多5000字符
- 负责人：必填,从团队成员中选择
- 截止日期：可选,日期时间选择器
- 优先级：必填,高/中/低
- 标签：可选,多选

**处理逻辑**：

1. 验证必填字段
2. 检查负责人是否在当前项目团队中
3. 生成唯一的任务ID
4. 保存任务到数据库
5. 发送通知给负责人
6. 记录操作日志

**输出**：

- 成功：返回任务详情,跳转到任务详情页
- 失败：显示错误提示(如"任务标题不能为空")

**业务规则**：

- 一个任务只能有一个负责人
- 截止日期不能早于当前时间
- 删除的任务可以在30天内恢复

**异常处理**：

- 负责人不存在：提示"该用户不在项目团队中"
- 网络错误：本地保存草稿,提示"网络异常,已保存草稿"
- 权限不足：提示"您没有创建任务的权限"

---

## 3. 非功能需求

### 3.1 性能要求

| 指标       | 要求        | 说明                   |
| ---------- | ----------- | ---------------------- |
| 响应时间   | < 2秒       | 页面加载和操作响应时间 |
| 并发用户   | 100+        | 同时在线用户数         |
| 数据处理   | 10000条任务 | 单个项目支持的任务数量 |
| 数据库查询 | < 500ms     | 复杂查询响应时间       |

### 3.2 安全要求

- **身份认证**：JWT Token,有效期24小时
- **数据加密**：HTTPS传输,敏感数据AES-256加密存储
- **权限控制**：基于角色的访问控制(RBAC),角色包括管理员、项目经理、成员、访客
- **数据备份**：每日凌晨自动备份,保留最近30天的备份
- **审计日志**：记录所有关键操作(创建、修改、删除任务)

### 3.3 兼容性要求

- **浏览器**：Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
- **设备**：桌面端(主要)、移动端(查看和简单操作)
- **操作系统**：Windows 10+, macOS 10.15+, iOS 14+, Android 10+
- **屏幕分辨率**：最小支持1366x768

### 3.4 可用性要求

- **系统可用性**：99.5%
- **故障恢复时间**：< 2小时
- **数据备份频率**：每日
- **容错能力**：前端离线缓存,网络恢复后自动同步

### 3.5 可维护性要求

- **代码规范**：遵循ESLint + Prettier规范
- **文档要求**：API文档(Swagger)、组件文档(Storybook)、部署文档
- **日志规范**：使用Winston,分级别记录(error/warn/info/debug)

---

## 4. 技术方案

### 4.1 技术栈

| 层级     | 技术选型          | 版本 | 选型理由                           |
| -------- | ----------------- | ---- | ---------------------------------- |
| 前端框架 | React             | 18.x | 生态成熟,团队熟悉,组件化开发效率高 |
| 状态管理 | Zustand           | 4.x  | 轻量级,API简洁,适合中小型项目      |
| UI组件库 | Ant Design        | 5.x  | 企业级UI组件,开箱即用              |
| 后端框架 | Node.js + Express | 4.x  | JavaScript全栈,开发效率高          |
| 数据库   | PostgreSQL        | 14.x | 支持复杂查询,数据一致性好          |
| 缓存     | Redis             | 7.x  | 高性能,支持多种数据结构            |
| 实时通信 | Socket.io         | 4.x  | 实现实时通知和协作                 |

### 4.2 系统架构

```
┌─────────────────────────────────────┐
│         用户端 (浏览器)              │
│    React + Ant Design + Zustand     │
└──────────────┬──────────────────────┘
               │ HTTPS
┌──────────────▼──────────────────────┐
│          Nginx (反向代理)            │
└──────────────┬──────────────────────┘
               │
       ┌───────┴────────┐
       │                │
┌──────▼──────┐  ┌─────▼──────┐
│  API服务    │  │ WebSocket  │
│  (Express)  │  │ (Socket.io)│
└──────┬──────┘  └─────┬──────┘
       │                │
       └────────┬───────┘
                │
       ┌────────┴────────┐
       │                 │
┌──────▼──────┐  ┌──────▼──────┐
│ PostgreSQL  │  │    Redis    │
│  (主数据库)  │  │   (缓存)    │
└─────────────┘  └─────────────┘
```

**架构说明**：

- **前端**：单页应用(SPA),通过API与后端交互
- **API服务**：RESTful API,处理业务逻辑
- **WebSocket**：实现实时通知和协作功能
- **数据库**：PostgreSQL存储持久化数据
- **缓存**：Redis缓存热点数据,提升性能

### 4.3 数据模型

#### 核心实体

**用户 (User)**

```sql
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  username VARCHAR(50) UNIQUE NOT NULL,
  email VARCHAR(100) UNIQUE NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  avatar_url VARCHAR(255),
  role VARCHAR(20) DEFAULT 'member',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**任务 (Task)**

```sql
CREATE TABLE tasks (
  id SERIAL PRIMARY KEY,
  title VARCHAR(100) NOT NULL,
  description TEXT,
  status VARCHAR(20) DEFAULT 'todo',
  priority VARCHAR(10) DEFAULT 'medium',
  assignee_id INTEGER REFERENCES users(id),
  creator_id INTEGER REFERENCES users(id),
  project_id INTEGER REFERENCES projects(id),
  due_date TIMESTAMP,
  completed_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**项目 (Project)**

```sql
CREATE TABLE projects (
  id SERIAL PRIMARY KEY,
  name VARCHAR(100) NOT NULL,
  description TEXT,
  owner_id INTEGER REFERENCES users(id),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 实体关系

- 用户 与 任务(创建者)：一对多
- 用户 与 任务(负责人)：一对多
- 项目 与 任务：一对多
- 用户 与 项目：多对多(通过project_members表)

### 4.4 接口设计

#### API 1：创建任务

- **路径**：`POST /api/tasks`
- **请求头**：`Authorization: Bearer {token}`
- **请求参数**：
  ```json
  {
    "title": "实现用户登录功能",
    "description": "使用JWT实现用户登录",
    "assignee_id": 123,
    "project_id": 456,
    "priority": "high",
    "due_date": "2026-02-20T18:00:00Z"
  }
  ```
- **响应**：
  ```json
  {
    "code": 200,
    "message": "创建成功",
    "data": {
      "id": 789,
      "title": "实现用户登录功能",
      "status": "todo",
      "created_at": "2026-02-12T10:00:00Z"
    }
  }
  ```

#### API 2：获取任务列表

- **路径**：`GET /api/tasks`
- **请求头**：`Authorization: Bearer {token}`
- **查询参数**：
  - `status`: 任务状态(todo/in_progress/done)
  - `assignee_id`: 负责人ID
  - `project_id`: 项目ID
  - `page`: 页码(默认1)
  - `page_size`: 每页数量(默认20)
- **响应**：
  ```json
  {
    "code": 200,
    "data": {
      "tasks": [...],
      "total": 100,
      "page": 1,
      "page_size": 20
    }
  }
  ```

#### API 3：更新任务状态

- **路径**：`PATCH /api/tasks/:id/status`
- **请求头**：`Authorization: Bearer {token}`
- **请求参数**：
  ```json
  {
    "status": "done",
    "comment": "功能已完成并测试通过"
  }
  ```
- **响应**：
  ```json
  {
    "code": 200,
    "message": "状态更新成功"
  }
  ```

### 4.5 第三方集成

| 服务      | 用途           | 文档链接                                   |
| --------- | -------------- | ------------------------------------------ |
| 阿里云OSS | 文件存储(附件) | https://help.aliyun.com/product/31815.html |
| 邮件服务  | 发送通知邮件   | -                                          |

---

## 5. 项目计划

### 5.1 开发阶段

| 阶段     | 主要工作                     | 交付内容         | 预计时间 | 负责人     |
| -------- | ---------------------------- | ---------------- | -------- | ---------- |
| 需求分析 | 需求调研、原型设计           | 需求文档、原型图 | 1周      | 张三       |
| 设计阶段 | 架构设计、数据库设计、UI设计 | 设计文档、UI稿   | 1周      | 李四、王五 |
| 开发阶段 | 前后端功能开发               | 可运行代码       | 4周      | 开发团队   |
| 测试阶段 | 功能测试、性能测试           | 测试报告         | 1周      | 赵六       |
| 上线部署 | 部署、监控配置               | 生产环境         | 3天      | 运维团队   |

### 5.2 里程碑

- **M1 (第2周末)**：完成需求和设计,开发环境搭建完成
- **M2 (第4周末)**：完成核心功能开发(任务CRUD、状态管理)
- **M3 (第6周末)**：完成所有功能开发(通知、权限、统计)
- **M4 (第7周末)**：测试完成,修复所有P0/P1 bug
- **M5 (第8周)**：正式上线

### 5.3 资源配置

- **项目经理**：1人(张三)
- **前端开发**：2人(李四、王五)
- **后端开发**：2人(赵六、孙七)
- **UI设计**：1人(周八)
- **测试**：1人(吴九)

### 5.4 风险评估

| 风险               | 影响程度 | 发生概率 | 应对措施                            | 负责人 |
| ------------------ | -------- | -------- | ----------------------------------- | ------ |
| 实时通知技术难度高 | 高       | 中       | 提前进行技术预研,准备降级方案(轮询) | 赵六   |
| 需求变更频繁       | 中       | 高       | 建立变更评审流程,预留20%缓冲时间    | 张三   |
| 核心开发人员请假   | 高       | 低       | 代码review保证知识共享,文档完善     | 张三   |
| 性能不达标         | 中       | 中       | 开发阶段进行性能测试,及时优化       | 李四   |

---

## 6. 测试计划

### 6.1 测试策略

- **单元测试**：覆盖率 > 80%,使用Jest
- **集成测试**：核心流程全覆盖,使用Supertest
- **性能测试**：使用JMeter进行压力测试
- **安全测试**：SQL注入、XSS攻击测试
- **用户验收测试**：邀请5-10名真实用户试用

### 6.2 测试用例示例

| 用例ID | 测试场景                  | 预期结果                    | 优先级 |
| ------ | ------------------------- | --------------------------- | ------ |
| TC001  | 创建任务时标题为空        | 提示"任务标题不能为空"      | P0     |
| TC002  | 更新任务状态为已完成      | 状态更新成功,创建者收到通知 | P0     |
| TC003  | 100个用户同时访问任务列表 | 响应时间< 2秒,无错误        | P1     |

---

## 7. 部署方案

### 7.1 部署环境

- **开发环境**：本地Docker容器
- **测试环境**：阿里云ECS 2核4G
- **生产环境**：阿里云ECS 4核8G + RDS + Redis

### 7.2 部署流程

1. 代码提交到GitLab
2. GitLab CI自动构建Docker镜像
3. 运行自动化测试
4. 测试通过后部署到测试环境
5. 人工验收
6. 手动触发部署到生产环境
7. 监控告警配置

### 7.3 监控方案

- **应用监控**：使用PM2监控Node.js进程
- **性能监控**：使用阿里云云监控
- **日志监控**：ELK Stack(Elasticsearch + Logstash + Kibana)
- **告警机制**：错误率>5%或响应时间>3秒时发送钉钉告警

---

## 8. 运维方案

### 8.1 日常维护

- **数据备份**：每日凌晨2点自动备份数据库
- **日志清理**：保留最近30天的日志
- **性能优化**：每月分析慢查询并优化

### 8.2 应急预案

- **服务宕机**：
  1. 立即切换到备用服务器
  2. 通知技术团队排查问题
  3. 1小时内恢复服务
- **数据丢失**：
  1. 从最近的备份恢复
  2. 通知受影响用户
  3. 分析原因并改进

- **安全事件**：
  1. 立即隔离受影响系统
  2. 通知安全团队
  3. 修复漏洞并发布补丁

---

## 9. 附录

### 9.1 术语表

| 术语     | 解释                        |
| -------- | --------------------------- |
| P0/P1/P2 | 优先级,P0最高,P2最低        |
| RBAC     | 基于角色的访问控制          |
| JWT      | JSON Web Token,用于身份认证 |
| SPA      | 单页应用                    |

### 9.2 参考资料

- [React官方文档](https://react.dev/)
- [PostgreSQL文档](https://www.postgresql.org/docs/)
- [Ant Design组件库](https://ant.design/)

### 9.3 变更记录

| 版本 | 日期       | 修改人 | 修改内容 |
| ---- | ---------- | ------ | -------- |
| v1.0 | 2026-02-12 | 张三   | 初始版本 |
